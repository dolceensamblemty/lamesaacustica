<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>La Mesa Ac√∫stica</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Firebase SDKs -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword, signOut, onAuthStateChanged, signInAnonymously, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, getDoc, addDoc, setDoc, onSnapshot, collection, query, orderBy, getDocs } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Global Firebase instances (will be initialized below)
        let app;
        let db;
        let auth;
        let userId; // For Firestore security rules
        let isFirebaseInitialized = false; // Flag to ensure Firebase is fully set up before operations
        let currentSongListenerUnsubscribe = null; // To manage the listener lifecycle for current song
        let adminSongsListenerUnsubscribe = null; // To manage the listener lifecycle for admin songs

        // Firebase configuration (provided by Canvas runtime)
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id'; // Use provided app ID
        
        // Function to determine and render view based on URL hash and auth state
        function updateView(user) {
            const adminPanel = document.getElementById('admin-panel');
            const mainContent = document.getElementById('main-content');
            const loginFormContainer = document.getElementById('login-form-container');
            const adminEmailDisplay = document.getElementById('admin-email-display');

            let isAuthenticatedAsAdmin = user && user.email === 'admin@example.com';

            // Unsubscribe existing listeners to avoid duplicates or incorrect data access
            if (currentSongListenerUnsubscribe) {
                currentSongListenerUnsubscribe();
                currentSongListenerUnsubscribe = null;
            }
            if (adminSongsListenerUnsubscribe) {
                adminSongsListenerUnsubscribe();
                adminSongsListenerUnsubscribe = null;
            }

            if (window.location.hash === '#admin') {
                if (isAuthenticatedAsAdmin) {
                    loginFormContainer.classList.add('hidden');
                    adminPanel.classList.remove('hidden');
                    mainContent.classList.remove('hidden'); // Show main content (including admin panel at bottom)
                    adminEmailDisplay.textContent = user.email;
                    if (isFirebaseInitialized) {
                        adminSongsListenerUnsubscribe = setupAdminSongsListener(); // Setup admin listener
                    }
                } else {
                    // On #admin page but not authenticated as admin (or not authenticated at all)
                    loginFormContainer.classList.remove('hidden'); // Show login form
                    adminPanel.classList.add('hidden');
                    mainContent.classList.add('hidden'); // Hide main content
                    document.getElementById('login-message').textContent = 'Acceso denegado. Solo administradores.';
                    document.getElementById('login-message').classList.remove('text-green-600');
                    document.getElementById('login-message').classList.add('text-red-600');
                }
            } else {
                // Public view
                loginFormContainer.classList.add('hidden');
                adminPanel.classList.add('hidden');
                mainContent.classList.remove('hidden');
                if (isFirebaseInitialized) {
                    currentSongListenerUnsubscribe = setupCurrentSongListener(); // Setup public listener
                }
            }
            console.log("View updated based on auth state and hash. User:", user ? user.uid : 'null', "Hash:", window.location.hash);
        }

        // Initialize Firebase
        if (Object.keys(firebaseConfig).length > 0) {
            app = initializeApp(firebaseConfig);
            auth = getAuth(app);
            db = getFirestore(app);
            isFirebaseInitialized = true; // Set flag once initialized

            onAuthStateChanged(auth, async (user) => {
                if (!user) { // If no user is signed in
                    userId = 'anonymous'; // Set a generic ID for anonymous operations
                    // Attempt anonymous sign-in to ensure a user object for public reads if rules require it
                    try {
                        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;
                        if (initialAuthToken) {
                            await signInWithCustomToken(auth, initialAuthToken);
                        } else {
                            await signInAnonymously(auth);
                        }
                    } catch (error) {
                        console.error("Error during anonymous sign-in:", error);
                        // If anonymous sign-in fails, proceed with user as null,
                        // and updateView will handle hiding admin/showing public.
                        // Public reads will rely on `allow read: if true`.
                    }
                } else {
                    userId = user.uid; // Set actual user ID
                }
                updateView(user); // Call updateView AFTER auth state is determined
            });

            // Listen for hash changes to switch views without full page reload
            window.addEventListener('hashchange', () => updateView(auth.currentUser));

            // Initial view setup when Firebase is ready (important for first load)
            // This will be re-evaluated by onAuthStateChanged but helps ensure initial state
            updateView(auth.currentUser);

        } else {
            console.error("Firebase config not found. Please ensure __firebase_config is set.");
            document.getElementById('login-message').textContent = "Error: Firebase no configurado. Consulta la consola para detalles.";
        }

        // Admin Login
        document.getElementById('login-form')?.addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('admin-email').value;
            const password = document.getElementById('admin-password').value;
            const loginMessage = document.getElementById('login-message');

            try {
                await signInWithEmailAndPassword(auth, email, password);
                loginMessage.textContent = 'Inicio de sesi√≥n exitoso.';
                loginMessage.classList.remove('text-red-600');
                loginMessage.classList.add('text-green-600');
                // The onAuthStateChanged listener will handle showing the admin panel
            } catch (error) {
                console.error("Error al iniciar sesi√≥n:", error);
                loginMessage.textContent = `Error: ${error.message}`;
                loginMessage.classList.remove('text-green-600');
                loginMessage.classList.add('text-red-600');
            }
        });

        // Admin Logout
        document.getElementById('logout-button')?.addEventListener('click', async () => {
            try {
                await signOut(auth);
                console.log("Sesi√≥n cerrada correctamente.");
                // After logout, show the login form for admin hash, or main content for public hash
                updateView(null); // Re-evaluate view with null user
                document.getElementById('login-message').textContent = ''; // Clear login message
            } catch (error) {
                console.error("Error al cerrar sesi√≥n:", error);
            }
        });

        // Add Song to Firestore (Admin Functionality)
        document.getElementById('add-song-form')?.addEventListener('submit', async (e) => {
            e.preventDefault();
            const title = document.getElementById('song-title').value;
            const description = document.getElementById('song-description').value;
            const imageUrl = document.getElementById('song-image-url').value;
            const addSongMessage = document.getElementById('add-song-message');

            if (!db) {
                addSongMessage.textContent = 'Error: Firebase Firestore no inicializado.';
                addSongMessage.classList.remove('text-green-600');
                addSongMessage.classList.add('text-red-600');
                return;
            }

            try {
                await addDoc(collection(db, `artifacts/${appId}/songs`), {
                    title: title,
                    description: description,
                    imageUrl: imageUrl,
                    createdAt: new Date()
                });
                addSongMessage.textContent = 'Canci√≥n a√±adida con √©xito!';
                addSongMessage.classList.remove('text-red-600');
                addSongMessage.classList.add('text-green-600');
                e.target.reset(); // Clear form
            } catch (error) {
                console.error("Error adding song:", error);
                addSongMessage.textContent = `Error al a√±adir canci√≥n: ${error.message}`;
                addSongMessage.classList.remove('text-green-600');
                addSongMessage.classList.add('text-red-600');
            }
            setTimeout(() => addSongMessage.classList.add('hidden'), 3000);
            addSongMessage.classList.remove('hidden');
        });

        // Setup Admin Songs Listener (Real-time updates)
        function setupAdminSongsListener() {
            // Check if db is initialized and if auth.currentUser exists and is admin before attaching snapshot listener
            if (!db || !auth.currentUser || auth.currentUser.email !== 'admin@example.com') {
                const songsListContainer = document.getElementById('admin-songs-list');
                if (songsListContainer) songsListContainer.innerHTML = '<p class="text-center text-gray-400">Acceso no autorizado para ver canciones.</p>';
                return null;
            }

            const songsListContainer = document.getElementById('admin-songs-list');
            if (!songsListContainer) return null;

            // Return the unsubscribe function
            return onSnapshot(collection(db, `artifacts/${appId}/songs`), (snapshot) => {
                songsListContainer.innerHTML = ''; // Clear previous list
                if (snapshot.empty) {
                    songsListContainer.innerHTML = '<p class="text-center text-gray-400">No hay canciones a√±adidas. Usa el formulario de arriba.</p>';
                }
                snapshot.forEach((doc) => {
                    const song = doc.data();
                    const songId = doc.id;
                    const songItem = document.createElement('div');
                    songItem.className = 'flex items-center justify-between p-3 bg-gray-50 rounded-md shadow-sm mb-2';
                    songItem.innerHTML = `
                        <div class="flex-1">
                            <h4 class="font-semibold text-gray-800">${song.title}</h4>
                            <p class="text-sm text-gray-600">${song.description}</p>
                        </div>
                        <button data-song-id="${songId}" class="set-current-song-btn btn-primary ml-4 text-sm px-3 py-1">Activar</button>
                    `;
                    songsListContainer.appendChild(songItem);
                });

                // Add event listeners to "Activar" buttons
                document.querySelectorAll('.set-current-song-btn').forEach(button => {
                    button.onclick = async (event) => {
                        const songId = event.target.dataset.songId;
                        if (!db) return; // Ensure db is initialized
                        try {
                            await setDoc(doc(db, `artifacts/${appId}/app_state/current_song`), {
                                cancionActualId: songId,
                                lastUpdated: new Date()
                            });
                            console.log(`Canci√≥n actual establecida a: ${songId}`);
                        } catch (error) {
                            console.error("Error setting current song:", error);
                        }
                    };
                });
            }, (error) => {
                console.error("Error listening to admin songs:", error);
                songsListContainer.innerHTML = `<p class="text-center text-red-400">Error al cargar canciones: ${error.message}</p>`;
            });
        }

        // Setup Current Song Listener for Users (Real-time updates)
        function setupCurrentSongListener() {
            if (!db) return null;

            const currentSongDisplay = document.getElementById('current-song-display');
            if (!currentSongDisplay) return null; // Ensure element exists

            // Listen for changes in the 'current_song' document
            return onSnapshot(doc(db, `artifacts/${appId}/app_state/current_song`), async (docSnapshot) => {
                if (docSnapshot.exists()) {
                    const currentSongState = docSnapshot.data();
                    const cancionActualId = currentSongState.cancionActualId;

                    if (cancionActualId) {
                        // Fetch details of the current song
                        const songDoc = await getDoc(doc(db, `artifacts/${appId}/songs/${cancionActualId}`));
                        if (songDoc.exists()) {
                            const song = songDoc.data();
                            currentSongDisplay.classList.remove('hidden'); // Show the section
                            currentSongDisplay.innerHTML = `
                                <div class="bg-white p-6 rounded-xl shadow-lg flex flex-col md:flex-row items-center space-y-4 md:space-y-0 md:space-x-6 animate-fadeIn">
                                    <div class="md:w-1/3">
                                        <img src="${song.imageUrl}" onerror="this.onerror=null; this.src='https://placehold.co/300x200/cccccc/333333?text=Imagen+No+Disponible';" alt="${song.title}" class="rounded-lg shadow-md w-full h-auto object-cover">
                                    </div>
                                    <div class="md:w-2/3 text-center md:text-left">
                                        <p class="text-sm text-gold-600 font-bold mb-1">¬°Ahora Sonando!</p>
                                        <h3 class="text-3xl font-extrabold text-gray-900 mb-2">${song.title}</h3>
                                        <p class="text-gray-700">${song.description}</p>
                                    </div>
                                </div>
                            `;
                        } else {
                            currentSongDisplay.classList.add('hidden'); // Hide if song not found
                            console.warn("Current song ID exists but song details not found:", cancionActualId);
                        }
                    } else {
                        currentSongDisplay.classList.add('hidden'); // Hide if no current song ID
                    }
                } else {
                    currentSongDisplay.classList.add('hidden'); // Hide if 'current_song' document doesn't exist
                    console.log("No current song state document found.");
                }
            }, (error) => {
                console.error("Error listening to current song state:", error);
                currentSongDisplay.classList.add('hidden'); // Hide on error
            });
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        /* Reinicio universal para eliminar m√°rgenes y rellenos predeterminados */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box; /* Asegura que el padding y el borde se incluyan en el tama√±o del elemento */
        }

        html, body {
            height: 100%; /* Asegura que html y body ocupen toda la altura */
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: #000; /* Fondo negro para el body */
            color: #333;
            overflow-x: hidden; /* Prevent horizontal scrolling */
            padding-top: 64px; /* A√±adido padding al body para evitar que el contenido sea ocultado por el navbar fijo */
        }
        .container {
            max-width: 100vw;
            overflow-x: hidden;
        }
        .header-bg {
            /* Updated background image and added parallax effect */
            background-image: url('https://i.ibb.co/pBfr1P4c/Chat-GPT-Image-18-ago-2025-10-00-59-p-m.png');
            background-size: cover;
            background-position: center;
            background-attachment: fixed; /* Esto crea el efecto parallax */
            height: 400px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            color: white;
            position: relative;
            /* Se elimin√≥ el margin-top del header-bg; el padding-top del body lo maneja ahora */
        }
        .header-bg::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.4); /* Dark overlay for text readability */
        }
        .header-content {
            z-index: 10;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%; /* Ensure content takes full height to center items */
            padding: 2rem 1rem; /* Increased padding top/bottom for more space */
        }
        .header-content img {
            width: auto;
            max-width: 100%; /* Ensure it doesn't overflow container */
            height: 150px; /* Adjusted height for better spacing */
            object-fit: contain; /* Ensure the image fits without cropping */
            margin-bottom: 3rem; /* Increased space between logo and title */
            display: block; /* Ensure it takes its own line for proper margin */
        }
        .navbar {
            background-color: #2c2c2c; /* Dark charcoal */
            position: fixed; /* Make navbar sticky */
            top: 0; /* Position at the very top of the viewport */
            left: 0; /* Asegura que no haya espacio a la izquierda */
            width: 100%; /* Full width */
            z-index: 100; /* Ensure it stays above other content */
            height: 64px; /* Altura expl√≠cita para la barra de navegaci√≥n */
            display: flex; /* Para centrar elementos dentro del navbar */
            align-items: center; /* Centra verticalmente los elementos */
            /* Se elimin√≥ padding de .navbar, ahora lo manejan los nav-links */
        }
        .nav-link {
            padding: 1rem 1.5rem; /* Padding para los enlaces de navegaci√≥n */
            color: #e0b97a; /* Gold/Copper accent */
            transition: background-color 0.3s ease, color 0.3s ease; /* Smooth transition for hover effects */
            white-space: nowrap;
        }
        .nav-link:hover {
            background-color: #3a3a3a; /* Slightly lighter charcoal on hover */
            color: #f7f3ed; /* Change text color to a soft cream on hover */
        }
        .section {
            padding: 2rem 1rem;
            margin: 0 auto;
            max-width: 900px;
            background-color: #f7f3ed; /* Fondo crema para las secciones de contenido */
            border-radius: 0.75rem; /* Asegura bordes redondeados si la secci√≥n no es de ancho completo */
            margin-bottom: 2rem; /* Espacio entre secciones */
        }
        .card {
            background-color: #fff;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            transition: transform 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
        }
        .btn-primary {
            background-color: #e0b97a;
            color: #2c2c2c;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            transition: background-color 0.3s ease;
        }
        .btn-primary:hover {
            background-color: #c7a16b;
        }
        .input-field {
            border: 1px solid #ccc;
            border-radius: 0.5rem;
            padding: 0.75rem 1rem;
            width: 100%;
            background-color: #fcfcfc;
        }
        .social-share-btn {
            background-color: #2c2c2c;
            color: #e0b97a;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.3s ease;
        }
        .social-share-btn:hover {
            background-color: #3a3a3a;
        }
        .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 1000; /* Sit on top */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgba(0,0,0,0.7); /* Black w/ opacity */
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .modal-content {
            background-color: #fefefe;
            margin: auto;
            padding: 2rem;
            border-radius: 0.75rem;
            width: 80%;
            max-width: 500px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            position: relative;
        }
        .close-button {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            position: absolute;
            top: 10px;
            right: 20px;
        }
        .close-button:hover,
        .close-button:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes slideInUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .animate-fadeIn { animation: fadeIn 0.8s ease-out; }
        .animate-slideInUp { animation: slideInUp 0.6s ease-out; }

        .vote-option-btn {
            background-color: #f0e6da; /* Lighter background for vote options */
            color: #4a4a4a;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            font-weight: 500;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        .vote-option-btn:hover {
            background-color: #e7d8c6;
            border-color: #e0b97a;
        }
        .vote-option-btn.selected {
            background-color: #e0b97a;
            color: #2c2c2c;
            border-color: #2c2c2c;
            transform: scale(1.02);
        }

        /* WhatsApp floating button */
        .whatsapp-float {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #25d366; /* WhatsApp green */
            color: white;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            transition: transform 0.3s ease, background-color 0.3s ease;
        }
        .whatsapp-float:hover {
            transform: scale(1.1);
            background-color: #128c7e;
        }

        /* Floating Survey Button */
        .survey-float {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background-color: #e0b97a; /* Gold/Copper accent */
            color: #2c2c2c; /* Dark charcoal */
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            transition: transform 0.3s ease, background-color 0.3s ease;
            cursor: pointer;
        }
        .survey-float:hover {
            transform: scale(1.1);
            background-color: #c7a16b;
        }

        /* Contenedor de video responsive */
        .video-container {
            position: relative;
            width: 100%;
            padding-bottom: 56.25%; /* 16:9 Aspect Ratio (divide 9 by 16 = 0.5625) */
            height: 0;
            overflow: hidden;
            max-width: 100%;
            background: #000;
            border-radius: 0.5rem; /* Rounded corners for video */
            margin-top: 1.5rem; /* Space above video */
        }

        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        /* Nueva secci√≥n para el efecto parallax en la parte media */
        .middle-parallax-section {
            background-image: url('https://i.ibb.co/pBfr1P4c/Chat-GPT-Image-18-ago-2025-10-00-59-p-m.png');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            min-height: 300px; /* Altura para hacer el efecto visible */
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5); /* Sombra para mejor legibilidad del texto */
            font-size: 2.5rem;
            font-weight: bold;
            text-align: center;
            padding: 2rem 1rem;
        }


        /* Responsive adjustments */
        @media (max-width: 768px) {
            body {
                padding-top: 64px; /* Ensure mobile header also accounts for fixed navbar */
            }
            .header-bg {
                /* Removed margin-top from header-bg for mobile as well */
            }
            .navbar-menu {
                display: none;
                flex-direction: column;
                width: 100%;
                background-color: #2c2c2c;
                position: absolute; /* Changed to absolute for mobile menu to slide down from fixed nav */
                top: 64px; /* Height of the navbar */
                left: 0;
                z-index: 50; /* Z-index below the fixed navbar, but above page content */
            }
            .navbar-menu.open {
                display: flex;
            }
            .nav-link {
                padding: 1rem;
                text-align: center;
                border-bottom: 1px solid #3a3a3a;
            }
            .hamburger {
                display: block;
            }
            .header-content h1 {
                font-size: 2.5rem;
            }
            .header-content p {
                font-size: 1rem;
            }
            .whatsapp-float, .survey-float {
                width: 50px;
                height: 50px;
                font-size: 24px;
                bottom: 15px;
            }
            .whatsapp-float {
                right: 15px;
            }
            .survey-float {
                left: 15px;
            }
        }
        @media (min-width: 769px) {
            .hamburger {
                display: none;
            }
            .navbar-menu {
                display: flex !important; /* Ensure it's always flex on larger screens */
            }
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <!-- Login Form Container (Initially visible for #admin hash, hidden otherwise) -->
    <div id="login-form-container" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[200] hidden">
        <div class="bg-white p-8 rounded-lg shadow-xl max-w-sm w-full text-center">
            <h2 class="text-3xl font-bold mb-6 text-gray-900">Acceso de Administrador</h2>
            <form id="login-form" class="space-y-4">
                <div>
                    <input type="email" id="admin-email" placeholder="Correo Electr√≥nico" class="input-field" required value="admin@example.com">
                </div>
                <div>
                    <input type="password" id="admin-password" placeholder="Contrase√±a" class="input-field" required value="password123">
                </div>
                <button type="submit" class="btn-primary w-full">Iniciar Sesi√≥n</button>
                <p id="login-message" class="mt-4 text-red-600"></p>
            </form>
        </div>
    </div>

    <!-- Admin Panel (Hidden by default, shown after admin login for #admin hash) -->
    <div id="admin-panel" class="hidden fixed inset-x-0 bottom-0 bg-gray-800 text-white p-4 z-50 shadow-lg">
        <div class="max-w-4xl mx-auto flex flex-col md:flex-row justify-between items-center">
            <p class="text-sm md:text-base mb-2 md:mb-0">Administrador: <span id="admin-email-display" class="font-semibold"></span></p>
            <div class="flex flex-col md:flex-row items-center space-y-2 md:space-y-0 md:space-x-4">
                <!-- Add New Song Form -->
                <form id="add-song-form" class="flex flex-col md:flex-row items-center space-y-2 md:space-y-0 md:space-x-2 w-full md:w-auto">
                    <input type="text" id="song-title" placeholder="T√≠tulo Canci√≥n" class="input-field text-gray-900 text-sm md:w-32" required>
                    <input type="text" id="song-description" placeholder="Descripci√≥n" class="input-field text-gray-900 text-sm md:w-32" required>
                    <input type="url" id="song-image-url" placeholder="URL Imagen" class="input-field text-gray-900 text-sm md:w-32" required>
                    <button type="submit" class="btn-primary text-sm px-3 py-1 w-full md:w-auto">A√±adir</button>
                </form>
                <button id="logout-button" class="btn-primary text-sm px-3 py-1 bg-red-600 hover:bg-red-700 w-full md:w-auto">Cerrar Sesi√≥n</button>
            </div>
        </div>
        <p id="add-song-message" class="mt-2 text-center text-green-400 hidden"></p>
        <div id="admin-songs-list" class="mt-4 max-h-48 overflow-y-auto p-2 bg-gray-700 rounded-md">
            <!-- Songs will be loaded here by JavaScript -->
            <p class="text-center text-gray-400">Cargando canciones...</p>
        </div>
    </div>

    <!-- Main Content (Hidden initially, shown based on hash or after admin login) -->
    <div id="main-content" class="hidden">
        <!-- Navbar -->
        <nav class="navbar flex items-center relative z-50 justify-between md:justify-center">
            <button id="hamburger" class="text-white text-2xl focus:outline-none md:hidden">
                <i class="fas fa-bars"></i>
            </button>
            <div id="navbar-menu" class="navbar-menu md:flex md:items-center md:space-x-4">
                <a href="#participa" class="nav-link" title="Participa en el Concierto">‚ú®</a>
                <a href="#musicos" class="nav-link" title="Nuestros M√∫sicos y Narradora">üéª</a>
                <a href="#eventos" class="nav-link" title="Pr√≥ximos Eventos y Boletos">üéüÔ∏è</a>
                <a href="#galeria" class="nav-link" title="Galer√≠a de Momentos">üì∏</a>
                <a href="#comentarios" class="nav-link" title="Comentarios de Invitados">üí¨</a>
                <a href="#restaurante" class="nav-link" title="Secci√≥n del Restaurante">üçΩÔ∏è</a>
                <a href="#contacto" class="nav-link" title="Contacto Dolce Ensamble">üìû</a>
            </div>
        </nav>

        <!-- Header Section -->
        <header class="header-bg relative">
            <div class="header-content p-4 animate-fadeIn">
                <!-- Logo del proyecto -->
                <img src="https://i.ibb.co/HLhWzB00/Proyecto-de-video-4.gif" alt="La Mesa Ac√∫stica Logo" class="mx-auto">
                <h1 class="text-5xl font-extrabold mb-2 leading-tight">La Mesa Ac√∫stica</h1>
                <p class="text-xl italic font-light">"Una experiencia gastron√≥mica que se siente, se escucha y se vive."</p>
            </div>
        </header>

        <!-- Current Song Display (Hidden by default, shown when a song is active) -->
        <section id="current-song-display" class="section hidden">
            <h2 class="text-4xl font-bold text-center mb-8 text-gray-900">¬°Ahora Sonando! üé∂</h2>
            <div class="bg-white p-6 rounded-xl shadow-lg">
                <p class="text-center text-gray-600">No hay canci√≥n activa en este momento. ¬°Espera a que el administrador inicie una!</p>
            </div>
        </section>

        <!-- Participate Section -->
        <section id="participa" class="section animate-slideInUp">
            <h2 class="text-4xl font-bold text-center mb-8 text-gray-900">Participa en el Concierto ‚ú®</h2>
            <div class="bg-white p-6 rounded-xl shadow-lg mb-8">
                <h3 class="text-2xl font-semibold mb-4 text-gray-800">¬°Vota por tu Pieza Favorita! üé∂</h3>
                <p class="mb-4 text-gray-700">Tu voz cuenta. Ay√∫danos a elegir la pr√≥xima melod√≠a que tocar√° el ensamble esta noche.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                    <button class="vote-option-btn text-lg" data-vote="1">Vals de la Luz de Luna</button>
                    <button class="vote-option-btn text-lg" data-vote="2">Bolero Apasionado</button>
                    <button class="vote-option-btn text-lg" data-vote="3">Jazz Nocturno</button>
                    <button class="vote-option-btn text-lg" data-vote="4">Fantas√≠a Celta</button>
                </div>
                <button id="submitVoteBtn" class="btn-primary w-full text-center">Enviar mi Voto</button>
                <p id="voteMessage" class="mt-4 text-center text-green-600 font-semibold hidden">¬°Gracias por tu voto! üéâ</p>
            </div>

            <div class="bg-white p-6 rounded-xl shadow-lg">
                <h3 class="text-2xl font-semibold mb-4 text-gray-800">Comparte tu Experiencia üíñ</h3>
                <p class="mb-4 text-gray-700">¬øC√≥mo te hace sentir la m√∫sica? ¬øQu√© emociones evoca? Comparte tus comentarios y experiencias relacionadas con la tem√°tica del concierto. (Tus comentarios se leer√°n an√≥nimamente)</p>
                <textarea id="commentInput" class="input-field mb-4 h-32" placeholder="Escribe tu comentario aqu√≠..."></textarea>
                <button id="submitCommentBtn" class="btn-primary w-full text-center">Enviar Comentario</button>
                <p id="commentMessage" class="mt-4 text-center text-green-600 font-semibold hidden">¬°Comentario enviado! Gracias por compartir. ‚ú®</p>
                <div class="mt-6 flex justify-center space-x-4">
                    <button class="social-share-btn" onclick="shareOnSocial('facebook')"><i class="fab fa-facebook-f"></i></button>
                    <button class="social-share-btn" onclick="shareOnSocial('twitter')"><i class="fab fa-twitter"></i></button>
                    <button class="social-share-btn" onclick="shareOnSocial('instagram')"><i class="fab fa-instagram"></i></button>
                </div>
            </div>
        </section>

        <!-- Middle Parallax Section -->
        <section class="middle-parallax-section">
            "Donde cada nota cuenta una historia."
        </section>

        <!-- Musicians Section -->
        <section id="musicos" class="section animate-slideInUp">
            <h2 class="text-4xl font-bold text-center mb-8 text-gray-900">Nuestros M√∫sicos & Narradora üéª</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Narradora - Siempre la primera -->
                <div class="card p-6 text-center">
                    <img src="https://i.ibb.co/vCdB7QZZ/cinthia.jpg" alt="Narradora Cinthia" class="w-32 h-32 rounded-full mx-auto mb-4 object-cover">
                    <h3 class="text-xl font-semibold mb-2">Cinthia Garza</h3>
                    <p class="text-gray-600 mb-4">Narradora principal. Con su cautivadora voz, Cinthia te transportar√° a cada escena, haciendo que cada relato cobre vida. üó£Ô∏è</p>
                    <button class="social-share-btn mx-auto" onclick="shareMusician('Cinthia Garza', 'Narradora principal.')"><i class="fas fa-share-alt"></i></button>
                </div>
                <!-- Cantante -->
                <div class="card p-6 text-center">
                    <img src="https://i.ibb.co/HpVvkyZ7/Caro.jpg" alt="Cantante" class="w-32 h-32 rounded-full mx-auto mb-4 object-cover">
                    <h3 class="text-xl font-semibold mb-2">Carolina "Caro" Sol√≠s</h3>
                    <p class="text-gray-600 mb-4">Cantante principal. Su voz, una mezcla de dulzura y poder, te guiar√° a trav√©s de cada historia. üé§</p>
                    <button class="social-share-btn mx-auto" onclick="shareMusician('Carolina Sol√≠s', 'Cantante principal.')"><i class="fas fa-share-alt"></i></button>
                </div>
                <!-- Saxofonista -->
                <div class="card p-6 text-center">
                    <img src="https://i.ibb.co/0jBQBB0c/sax-azael.jpg" alt="Saxofonista" class="w-32 h-32 rounded-full mx-auto mb-4 object-cover">
                    <h3 class="text-xl font-semibold mb-2">Antonio "Aza" Zazueta</h3>
                    <p class="text-gray-600 mb-4">Saxofonista principal. Con su sax, Aza a√±ade un toque de sensualidad y sofisticaci√≥n a cada pieza. üé∑</p>
                    <button class="social-share-btn mx-auto" onclick="shareMusician('Antonio Zazueta', 'Saxofonista principal.')"><i class="fas fa-share-alt"></i></button>
                </div>
                <!-- Arpista -->
                <div class="card p-6 text-center">
                    <img src="https://i.ibb.co/VcCQYbDp/ariadna-ari-arpista.jpg" alt="Arpista" class="w-32 h-32 rounded-full mx-auto mb-4 object-cover">
                    <h3 class="text-xl font-semibold mb-2">Ariadna "Ari" G√≥mez</h3>
                    <p class="text-gray-600 mb-4">Arpista, sus melod√≠as et√©reas transportan a un mundo de ensue√±o y magia.üí´</p>
                    <button class="social-share-btn mx-auto" onclick="shareMusician('Ariadna G√≥mez', 'Arpista.')"><i class="fas fa-share-alt"></i></button>
                </div>
                <!-- Violinista -->
                <div class="card p-6 text-center">
                    <img src="https://i.ibb.co/7JMYCWVw/414867486-10232565539508056-4641127466506244359-n.jpg" alt="Violinista" class="w-32 h-32 rounded-full mx-auto mb-4 object-cover">
                    <h3 class="text-xl font-semibold mb-2">Ricardo "Rola" Mart√≠nez</h3>
                    <p class="text-gray-600 mb-4">Violinista principal y arreglista. Con su pasi√≥n, Rola teje melod√≠as que tocan el alma, explorando desde lo cl√°sico hasta lo contempor√°neo. üåü</p>
                    <button class="social-share-btn mx-auto" onclick="shareMusician('Ricardo Mart√≠nez', 'Violinista principal y arreglista.')"><i class="fas fa-share-alt"></i></button>
                </div>
                <!-- Percusionista -->
                <div class="card p-6 text-center">
                    <img src="https://i.ibb.co/YBtkYswp/percusionista.jpg" alt="Percusionista" class="w-32 h-32 rounded-full mx-auto mb-4 object-cover">
                    <h3 class="text-xl font-semibold mb-2">Jonathan "Johny" P√©rez</h3>
                    <p class="text-gray-600 mb-4">Percusionista, el ritmo y la energ√≠a de Johny hacen vibrar cada rinc√≥n del escenario. ü•Å</p>
                    <button class="social-share-btn mx-auto" onclick="shareMusician('Jonathan P√©rez', 'Percusionista.')"><i class="fas fa-share-alt"></i></button>
                </div>
                <!-- Pianista -->
                <div class="card p-6 text-center">
                    <img src="https://i.ibb.co/tMzCC7dz/pianista.jpg" alt="Pianista" class="w-32 h-32 rounded-full mx-auto mb-4 object-cover">
                    <h3 class="text-xl font-semibold mb-2">Fernando "Fer" Garc√≠a</h3>
                    <p class="text-gray-600 mb-4">Pianista y compositor. Las manos de Fer crean atm√≥sferas m√°gicas que te sumergen en cada emoci√≥n. üéπ</p>
                    <button class="social-share-btn mx-auto" onclick="shareMusician('Fernando Garc√≠a', 'Pianista y compositor.')"><i class="fas fa-share-alt"></i></button>
                </div>
                <!-- Chelista -->
                <div class="card p-6 text-center">
                    <img src="https://i.ibb.co/C5jHH4jy/marcello.jpg" alt="Chelista" class="w-32 h-32 rounded-full mx-auto mb-4 object-cover">
                    <h3 class="text-xl font-semibold mb-2">Marcelo "Marcello" R√≠os</h3>
                    <p class="text-gray-600 mb-4">Chelista, su cello aporta una profundidad y calidez inigualable al ensamble.üé∂</p>
                    <button class="social-share-btn mx-auto" onclick="shareMusician('Marcelo R√≠os', 'Chelista.')"><i class="fas fa-share-alt"></i></button>
                </div>
            </div>
        </section>

        <!-- Upcoming Events Section -->
        <section id="eventos" class="section animate-slideInUp">
            <h2 class="text-4xl font-bold text-center mb-8 text-gray-900">Pr√≥ximos Eventos y Boletos üéüÔ∏è</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="card p-6">
                    <h3 class="text-2xl font-semibold mb-4 text-gray-800">Noche de Cine y Emociones: Dramas Rom√°nticos</h3>
                    <p class="text-gray-700 mb-2"><i class="far fa-calendar-alt mr-2 text-gold-600"></i> Fecha: 20 de Septiembre, 2025</p>
                    <p class="text-gray-700 mb-2"><i class="far fa-clock mr-2 text-gold-600"></i> Hora: 8:00 PM</p>
                    <p class="text-gray-700 mb-4"><i class="fas fa-map-marker-alt mr-2 text-gold-600"></i> Lugar: Restaurante Cornalina</p>
                    <p class="text-gray-700 mb-4">Sum√©rgete en historias de amor y pasi√≥n con las bandas sonoras m√°s conmovedoras del cine.</p>
                    <a href="https://ejemplo.com/boletos-dramas" target="_blank" class="btn-primary w-full text-center block">Comprar Boletos</a>
                </div>
                <div class="card p-6">
                    <h3 class="text-2xl font-semibold mb-4 text-gray-800">Una Velada con la Realeza: Estilo Bridgerton</h3>
                    <p class="text-gray-700 mb-2"><i class="far fa-calendar-alt mr-2 text-gold-600"></i> Fecha: 18 de Octubre, 2025</p>
                    <p class="text-gray-700 mb-2"><i class="far fa-clock mr-2 text-gold-600"></i> Hora: 8:00 PM</p>
                    <p class="text-700 mb-4"><i class="fas fa-map-marker-alt mr-2 text-gold-600"></i> Lugar: Restaurante Cornalina</p>
                    <p class="text-gray-700 mb-4">D√©jate llevar por la intriga y el romance de la Regencia, con la m√∫sica de la famosa serie.</p>
                    <a href="https://ejemplo.com/boletos-bridgerton" target="_blank" class="btn-primary w-full text-center block">Comprar Boletos</a>
                </div>
            </div>
        </section>

        <!-- Photo Gallery Section -->
        <section id="galeria" class="section animate-slideInUp">
            <h2 class="text-4xl font-bold text-center mb-8 text-gray-900">Galer√≠a de Momentos üì∏</h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
                <img src="https://i.ibb.co/L3rbLkR/Gemini-Generated-Image-9487oa9487oa9487.png" alt="M√∫sicos en Cornalina 1" class="rounded-lg shadow-md w-full h-auto object-cover transform transition-transform duration-300 hover:scale-105">
                <img src="https://i.ibb.co/gb12gW70/Gemini-Generated-Image-cp2doncp2doncp2d.png" alt="M√∫sicos en Cornalina 2" class="rounded-lg shadow-md w-full h-auto object-cover transform transition-transform duration-300 hover:scale-105">
                <img src="https://i.ibb.co/qYtgnsJM/Gemini-Generated-Image-3rpdk13rpdk13rpd.png" alt="M√∫sicos en Cornalina 3" class="rounded-lg shadow-md w-full h-auto object-cover transform transition-transform duration-300 hover:scale-105">
                <img src="https://i.ibb.co/Fb41923g/Gemini-Generated-Image-l5hr1tl5hr1tl5hr.png" alt="M√∫sicos en Cornalina 4" class="rounded-lg shadow-md w-full h-auto object-cover transform transition-transform duration-300 hover:scale-105">
                <img src="https://i.ibb.co/VWZrqkpD/Gemini-Generated-Image-vi1ca4vi1ca4vi1c.png" alt="M√∫sicos en Cornalina 5" class="rounded-lg shadow-md w-full h-auto object-cover transform transition-transform duration-300 hover:scale-105">
                <img src="https://i.ibb.co/WWgjX1v7/Gemini-Generated-Image-jbkt3ijbkt3ijbkt.png" alt="M√∫sicos en Cornalina 6" class="rounded-lg shadow-md w-full h-auto object-cover transform transition-transform duration-300 hover:scale-105">
            </div>
        </section>

        <!-- Past Comments Section -->
        <section id="comentarios" class="section animate-slideInUp">
            <h2 class="text-4xl font-bold text-center mb-8 text-gray-900">Lo que Dicen Nuestros Invitados üí¨</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Comment 1 -->
                <div class="card p-6">
                    <div class="flex items-center mb-4">
                        <img src="https://placehold.co/60x60/e0b97a/2c2c2c?text=JP" alt="Comensal JP" class="w-12 h-12 rounded-full mr-4 object-cover">
                        <div>
                            <p class="font-semibold text-gray-800">Juan P√©rez</p>
                            <div class="text-yellow-500 text-sm"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></div>
                        </div>
                    </div>
                    <p class="text-gray-700">"Una experiencia m√°gica. La m√∫sica en vivo y la comida crearon una atm√≥sfera inolvidable. ¬°Volveremos pronto!" ‚ú®</p>
                </div>
                <!-- Comment 2 -->
                <div class="card p-6">
                    <div class="flex items-center mb-4">
                        <img src="https://placehold.co/60x60/e0b97a/2c2c2c?text=AM" alt="Comensal AM" class="w-12 h-12 rounded-full mr-4 object-cover">
                        <div>
                            <p class="font-semibold text-gray-800">Ana Mar√≠a</p>
                            <div class="text-yellow-500 text-sm"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="far fa-star"></i></div>
                        </div>
                    </div>
                    <p class="text-gray-700">"Me encant√≥ la interacci√≥n con la app para votar. Hizo que el concierto se sintiera muy personal. ¬°Gran idea!" üì±</p>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contacto" class="section animate-slideInUp">
            <h2 class="text-4xl font-bold text-center mb-8 text-gray-900">Contacto Dolce Ensamble üìû</h2>
            <div class="bg-white p-6 rounded-xl shadow-lg text-center">
                <p class="text-gray-700 mb-4">¬°Nos encantar√≠a ser parte de tu pr√≥ximo evento especial! Cont√°ctanos para bodas, eventos sociales o corporativos.</p>
                <p class="text-gray-800 font-semibold text-lg mb-2"><i class="fas fa-envelope mr-2 text-gold-600"></i> info@dolceensamble.com</p>
                <p class="text-gray-800 font-semibold text-lg mb-4"><i class="fas fa-phone mr-2 text-gold-600"></i> +52 (81) 1234 5678</p>
                <div class="flex justify-center space-x-4">
                    <a href="https://www.instagram.com/dolceensamble/" target="_blank" class="social-share-btn"><i class="fab fa-instagram"></i></a>
                    <a href="https://www.facebook.com/dolceensamble" target="_blank" class="social-share-btn"><i class="fab fa-facebook-f"></i></a>
                    <a href="https://www.youtube.com/dolceensamble" target="_blank" class="social-share-btn"><i class="fab fa-youtube"></i></a>
                </div>
                <!-- YouTube Video Embed -->
                <div class="video-container mt-6">
                    <iframe
                        src="https://www.youtube.com/embed/E5mmd7eRJ14"
                        frameborder="0"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                        allowfullscreen>
                    </iframe>
                </div>
            </div>
        </section>

        <!-- Satisfaction Survey Modal -->
        <div id="satisfactionModal" class="modal">
            <div class="modal-content text-center">
                <span class="close-button" onclick="closeModal()">&times;</span>
                <h3 class="text-2xl font-semibold mb-4 text-gray-800">Encuesta de Satisfacci√≥n ‚úÖ</h3>
                <p class="mb-6 text-gray-700">Ay√∫danos a mejorar tu experiencia. ¬°Tu opini√≥n es muy valiosa!</p>
                <a href="https://forms.gle/98hgfrRA9TeTmrJX8" target="_blank" class="btn-primary w-full block text-center">Responder Encuesta</a>
            </div>
        </div>

        <!-- WhatsApp Floating Button -->
        <a href="https://wa.me/528110474854" class="whatsapp-float" target="_blank">
            <i class="fab fa-whatsapp"></i>
        </a>

        <!-- Floating Survey Button -->
        <button id="floatingSurveyBtn" class="survey-float">
            <i class="fas fa-clipboard-list"></i>
        </button>
    </div> <!-- End of main-content -->

</body>
</html>
